{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://semestr/./YouTubeAPI.mjs","webpack://semestr/./main.js"],"sourcesContent":["class YouTubeVideo {\r\n    constructor(id, title, author, preview, upload, views, duration)\r\n    {\r\n        this.id = id\r\n        this.title = title\r\n        this.author = author\r\n        this.preview = preview\r\n        this.upload = upload\r\n        this.views = views\r\n        this.duration = duration\r\n    }\r\n\r\n    static searchConstructor(id, title, author, preview, upload)\r\n    {\r\n        return new YouTubeVideo(id, title, author, preview, upload, \"\", \"\")\r\n    }\r\n}\r\n\r\nclass YouTubeAPI {\r\n    constructor(apiKey) {\r\n        this.apiKey = apiKey;\r\n    }\r\n\r\n    getVideoDetails(videoId) {\r\n        const url = `https://youtube.googleapis.com/youtube/v3/videos?part=snippet,statistics,contentDetails,id&id=${videoId}&key=${this.apiKey}`;\r\n        let DataArray = []\r\n        console.log(`getVideoDetails: Sending request to ${url}`);\r\n        return fetch(url)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            DataArray.push(new YouTubeVideo(\r\n            data.items[0].id,\r\n            data.items[0].snippet.title,\r\n            data.items[0].snippet.channelTitle,\r\n            data.items[0].snippet.thumbnails.high.url,\r\n            data.items[0].snippet.publishedAt,\r\n            data.items[0].statistics.viewCount,\r\n            data.items[0].contentDetails.duration\r\n            ))\r\n        return DataArray;\r\n        });\r\n    }\r\n\r\n    searchVideosWithFilters(query, maxResults, filters) {\r\n        let url = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${query}&type=video&maxResults=${maxResults}&key=${this.apiKey}`;\r\n        let DataArray = []\r\n        if (filters) {\r\n        if (filters.orderBy) {\r\n            url += `&order=${filters.orderBy}`;\r\n        }\r\n        if (filters.publishedAfter) {\r\n            url += `&publishedAfter=${filters.publishedAfter}`;\r\n        }\r\n        if (filters.publishedBefore) {\r\n            url += `&publishedBefore=${filters.publishedBefore}`;\r\n        }\r\n        if (filters.videoDefinition) {\r\n            url += `&videoDefinition=${filters.videoDefinition}`;\r\n        }\r\n        }\r\n        console.log(`searchVideosWithFilters: Sending request to ${url}`);\r\n        return fetch(url)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            for(let i=0; i<data.items.length; i++){\r\n                DataArray.push(YouTubeVideo.searchConstructor(\r\n                data.items[i].id.videoId,\r\n                data.items[i].snippet.title,\r\n                data.items[i].snippet.channelTitle,\r\n                data.items[i].snippet.thumbnails.high.url,\r\n                data.items[i].snippet.publishedAt\r\n                ))\r\n            }\r\n        return DataArray;\r\n        });\r\n    }\r\n}\r\n\r\nexport {YouTubeAPI, YouTubeVideo};","import { YouTubeAPI, YouTubeVideo } from \"./YouTubeAPI.mjs\"\r\n\r\nconst apiKey = 'AIzaSyCXAv-2ZqSYc3BCF0ZL04t3ynrnrECTkQ0'\r\nconst youtube = new YouTubeAPI(apiKey);\r\n\r\nconst videosTable = document.getElementById('videos')\r\nconst searchTable = document.getElementById('searchData')\r\nconst infoTable = document.getElementById('videoInfo')\r\n\r\nconst docTitle = document.getElementById('userName')\r\nconst webLink = document.getElementById('link')\r\nconst searchButton = document.getElementById('search_button')\r\nconst getVideo = document.getElementById('get_video')\r\nconst addButton = document.getElementById('addButton')\r\n\r\nlet name = prompt(\"Привет! Как вас зовут?\")\r\ndocTitle.textContent = \"Привет, \" + name + \"!\";\r\n\r\nlet videosData = []\r\nlet searchData = []\r\n\r\nfunction renderTable(data, table)\r\n{\r\n    table.innerHTML=''\r\n    console.log(\"start render \" + table.id)\r\n    for (let video of data)\r\n    {\r\n        let row = document.createElement('tr')\r\n\r\n        for (let item in video)\r\n        {\r\n            if (item !== '')\r\n            {\r\n                let column = document.createElement('th')\r\n\r\n                if(item != \"preview\")\r\n                {\r\n                    column.textContent = video[item] \r\n                }else\r\n                {\r\n                    let image = document.createElement(\"img\")\r\n                    image.src = video[item]\r\n                    column.appendChild(image)\r\n                }\r\n                row.appendChild(column)\r\n            }\r\n        }\r\n        \r\n        setListener(row, 'click', () => {\r\n            if(row.id != 'selected')\r\n            {\r\n                row.id = 'selected'\r\n                row.className = table.id\r\n                row.style.backgroundColor = 'lightblue'\r\n                console.log(row)\r\n            } else {\r\n                row.id = ''\r\n                row.className = ''\r\n                row.style.backgroundColor = document.getElementById('searchData').style.backgroundColor\r\n            }\r\n            \r\n        })\r\n\r\n        table.appendChild(row)\r\n    }\r\n}\r\n\r\nconst setListener = (element, type, handler) => {\r\n    console.log(\"Adding listener to \" + element.id)\r\n    if (!element) \r\n    {\r\n        return\r\n    }\r\n    element.addEventListener(type, handler)\r\n    return () => {\r\n        element.removeEventListener(type, handler)\r\n    }\r\n    \r\n}\r\n\r\nfunction selectRows() {\r\n    let selectedRows = []\r\n    for (let item of document.querySelectorAll('tr'))\r\n    {\r\n        if(item.id == 'selected'){\r\n            selectedRows.push(item)\r\n        } \r\n    }\r\n    return selectedRows\r\n}\r\n\r\nsetListener(addButton, 'click', async () => {\r\n    console.log('Add')\r\n    for (let item of selectRows())\r\n    {\r\n        let searchId = searchData[item.rowIndex].id\r\n        youtube.getVideoDetails(searchId)\r\n        .then(video => {\r\n            console.log(video)\r\n            videosData.push(video[0])\r\n            renderTable(videosData, videosTable)\r\n        })\r\n    }\r\n});\r\n\r\nsetListener(getVideo, 'click', async () => {\r\n    youtube.getVideoDetails(webLink.value.replace('https://www.youtube.com/watch?v=', ''))\r\n    .then(video => {\r\n        console.log(video);\r\n    })\r\n    .catch(error => {\r\n        console.error(error);\r\n    });\r\n})\r\n\r\nlet filters = {\r\n    type: \"video\",\r\n    orderBy: \"viewCount\",\r\n    videoDefinition: \"high\",\r\n    videoEmbeddable: \"true\"\r\n};\r\n\r\nsetListener(searchButton, 'click', async () => {\r\n    youtube.searchVideosWithFilters(document.getElementById(\"query\").value, 5, filters)\r\n    .then(videos => {\r\n    console.log(videos);\r\n    searchData = videos\r\n    renderTable(searchData, searchTable)\r\n    })\r\n    .catch(error => {\r\n    console.error(error);\r\n    });\r\n})"],"names":["YouTubeVideo","constructor","id","title","author","preview","upload","views","duration","this","static","youtube","apiKey","getVideoDetails","videoId","url","DataArray","console","log","fetch","then","response","json","data","push","items","snippet","channelTitle","thumbnails","high","publishedAt","statistics","viewCount","contentDetails","searchVideosWithFilters","query","maxResults","filters","orderBy","publishedAfter","publishedBefore","videoDefinition","i","length","searchConstructor","videosTable","document","getElementById","searchTable","docTitle","webLink","searchButton","getVideo","addButton","prompt","textContent","videosData","searchData","renderTable","table","innerHTML","video","row","createElement","item","column","image","src","appendChild","setListener","className","style","backgroundColor","element","type","handler","addEventListener","removeEventListener","async","selectedRows","querySelectorAll","selectRows","searchId","rowIndex","value","replace","catch","error","videoEmbeddable","videos"],"sourceRoot":""}