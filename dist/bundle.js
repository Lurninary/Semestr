(()=>{"use strict";class e{constructor(e,t,i,s,n,o,l){this.id=e,this.title=t,this.author=i,this.preview=o,this.views=s,this.duration=n,this.upload=l}}const t=document.getElementById("name"),i=document.getElementById("link"),s=document.getElementById("search_button"),n=document.getElementById("get_video"),o=new class{constructor(e){this.apiKey=e}searchVideos(t,i){const s=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${t}&type=video&maxResults=${i}&key=${this.apiKey}`;let n=[];return console.log(`searchVideos: Sending request to ${s}`),fetch(s).then((e=>e.json())).then((t=>{for(let i=0;i<t.items.length;i++)n.push(new e(t.items[i].id,t.items[i].snippet.title,t.items[i].snippet.channelTitle,t.items[i].statistics.viewCount,t.items[i].contentDetails.duration,t.items[i].snippet.thumbnails.medium.url,t.items[i].snippet.publishedAt));return n}))}getVideoDetails(t){const i=`https://youtube.googleapis.com/youtube/v3/videos?part=snippet,statistics,contentDetails,id&id=${t}&key=${this.apiKey}`;let s=[];return console.log(`getVideoDetails: Sending request to ${i}`),fetch(i).then((e=>e.json())).then((t=>(s.push(new e(t.items[0].id,t.items[0].snippet.title,t.items[0].snippet.channelTitle,t.items[0].statistics.viewCount,t.items[0].contentDetails.duration,t.items[0].snippet.thumbnails.medium.url,t.items[0].snippet.publishedAt)),s)))}searchVideosWithFilters(t,i,s){let n=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${t}&type=video&maxResults=${i}&key=${this.apiKey}`,o=[];return s&&(s.orderBy&&(n+=`&order=${s.orderBy}`),s.publishedAfter&&(n+=`&publishedAfter=${s.publishedAfter}`),s.publishedBefore&&(n+=`&publishedBefore=${s.publishedBefore}`),s.videoDefinition&&(n+=`&videoDefinition=${s.videoDefinition}`)),console.log(`searchVideosWithFilters: Sending request to ${n}`),fetch(n).then((e=>e.json())).then((t=>{for(let i=0;i<t.items.length;i++)o.push(new e(t.items[i].id,t.items[i].snippet.title,t.items[i].snippet.channelTitle,null,null,t.items[i].snippet.thumbnails.medium.url,t.items[i].snippet.publishedAt));return o}))}}("AIzaSyCXAv-2ZqSYc3BCF0ZL04t3ynrnrECTkQ0");let l=prompt("Привет! Как вас зовут?");t.textContent=l;const r=(e,t,i)=>{if(console.log("Adding listener to ${element}"),e)return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}};r(n,"click",(()=>{o.getVideoDetails(i.value.replace("https://www.youtube.com/watch?v=","")).then((e=>{console.log(e)})).catch((e=>{console.error(e)}))}));const p={orderBy:"viewCount",publishedAfter:"2022-01-01T00:00:00Z",videoDefinition:"high",videoEmbeddable:"true"};r(s,"click",(()=>{o.searchVideosWithFilters("JavaScript_tutorial",5,p).then((e=>{console.log(e)})).catch((e=>{console.error(e)}))}))})();
//# sourceMappingURL=bundle.js.map