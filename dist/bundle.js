(()=>{"use strict";const e=document.getElementById("name"),t=document.getElementById("link"),i=document.getElementById("search_button"),s=document.getElementById("get_video"),o=new class{constructor(e){this.apiKey=e}searchVideos(e,t){const i=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${e}&type=video&maxResults=${t}&key=${this.apiKey}`;return console.log(`searchVideos: Sending request to ${i}`),fetch(i).then((e=>e.json())).then((e=>e.items.map((e=>({id:e.snippet.resourceId.videoId,title:e.snippet.title,author:e.snippet.channelTitle,preview:e.snippet.thumbnails.medium.url})))))}getVideoDetails(e){const t=`https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&id=${e}&key=${this.apiKey}`;return console.log(`getVideoDetails: Sending request to ${t}`),fetch(t).then((e=>e.json())).then((e=>({id:e.items[0].snippet.resourceId.videoId,title:e.items[0].snippet.title,author:e.items[0].snippet.channelTitle,views:e.items[0].statistics.viewCount,duration:e.items[0].contentDetails.duration,preview:e.items[0].snippet.thumbnails.medium.url})))}searchVideosWithFilters(e,t,i){let s=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${e}&type=video&maxResults=${t}&key=${this.apiKey}`;return i&&(i.orderBy&&(s+=`&order=${i.orderBy}`),i.publishedAfter&&(s+=`&publishedAfter=${i.publishedAfter}`),i.publishedBefore&&(s+=`&publishedBefore=${i.publishedBefore}`),i.videoDefinition&&(s+=`&videoDefinition=${i.videoDefinition}`)),console.log(`searchVideosWithFilters: Sending request to ${s}`),fetch(s).then((e=>e.json())).then((e=>e.items.map((e=>({id:e.id.videoId,title:e.snippet.title,author:e.snippet.channelTitle,preview:e.snippet.thumbnails.medium.url})))))}}("AIzaSyCXAv-2ZqSYc3BCF0ZL04t3ynrnrECTkQ0");let n=prompt("Привет! Как вас зовут?");e.textContent=n;const r=(e,t,i)=>{if(console.log("Adding listener to ${element}"),e)return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}};r(s,"click",(()=>{o.getVideoDetails(t.textContent.replace("https://www.youtube.com/watch?v=")).then((e=>{console.log(e)})).catch((e=>{console.error(e)}))}));const l={orderBy:"viewCount",publishedAfter:"2022-01-01T00:00:00Z",videoDefinition:"high"};r(i,"click",(()=>{o.searchVideosWithFilters("JavaScript tutorial",1,l).then((e=>{console.log(e)})).catch((e=>{console.error(e)}))}))})();
//# sourceMappingURL=bundle.js.map