(()=>{"use strict";class e{constructor(e,t,i,n,s,o,l){this.id=e,this.title=t,this.author=i,this.preview=o,this.views=n,this.duration=s,this.upload=l}}const t=new class{constructor(e){this.apiKey=e}getVideoDetails(t){const i=`https://youtube.googleapis.com/youtube/v3/videos?part=snippet,statistics,contentDetails,id&id=${t}&key=${this.apiKey}`;let n=[];return console.log(`getVideoDetails: Sending request to ${i}`),fetch(i).then((e=>e.json())).then((t=>(n.push(new e(t.items[0].id.videoId,t.items[0].snippet.title,t.items[0].snippet.channelTitle,t.items[0].statistics.viewCount,t.items[0].contentDetails.duration,t.items[0].snippet.thumbnails.medium.url,t.items[0].snippet.publishedAt)),n)))}searchVideosWithFilters(t,i,n){let s=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${t}&type=video&maxResults=${i}&key=${this.apiKey}`,o=[];return n&&(n.orderBy&&(s+=`&order=${n.orderBy}`),n.publishedAfter&&(s+=`&publishedAfter=${n.publishedAfter}`),n.publishedBefore&&(s+=`&publishedBefore=${n.publishedBefore}`),n.videoDefinition&&(s+=`&videoDefinition=${n.videoDefinition}`)),console.log(`searchVideosWithFilters: Sending request to ${s}`),fetch(s).then((e=>e.json())).then((t=>{for(let i=0;i<t.items.length;i++)o.push(new e(t.items[i].id.videoId,t.items[i].snippet.title,t.items[i].snippet.channelTitle,null,null,t.items[i].snippet.thumbnails.medium.url,t.items[i].snippet.publishedAt));return o}))}}("AIzaSyCXAv-2ZqSYc3BCF0ZL04t3ynrnrECTkQ0"),i=document.getElementById("videos"),n=document.getElementById("searchData"),s=(document.getElementById("videoInfo"),document.getElementById("userName")),o=document.getElementById("link"),l=document.getElementById("search_button"),d=document.getElementById("get_video");let r=prompt("Привет! Как вас зовут?");s.textContent="Привет, "+r+"!";let c=[];function u(e,t){t.innerHTML="",console.log("start render"+t.id);for(let i of e){let e=document.createElement("tr");for(let t in i)if(null!=t){let n=document.createElement("th");if("preview"!=t)n.textContent=i[t];else{let e=document.createElement("img");e.src=i[t],n.appendChild(e)}e.appendChild(n)}if("searchData"==t.id){let t=document.createElement("button");t.textContent="Добавить",a(t,"click",(async()=>{h(i)}));let n=document.createElement("th");n.appendChild(t),e.appendChild(n)}t.appendChild(e)}}const a=(e,t,i)=>{if(console.log("Adding listener to ${element}"),e)return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}};function h(e){c.push(e),u(c,i)}a(d,"click",(async()=>{t.getVideoDetails(o.value.replace("https://www.youtube.com/watch?v=","")).then((e=>{console.log(e)})).catch((e=>{console.error(e)}))}));let p={type:"video",orderBy:"viewCount",videoDefinition:"high",videoEmbeddable:"true"};a(l,"click",(async()=>{t.searchVideosWithFilters("JavaScript_tutorial",5,p).then((e=>{console.log(e),u(e,n)})).catch((e=>{console.error(e)}))}))})();
//# sourceMappingURL=bundle.js.map